{"version":3,"sources":["webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?7a75"],"names":["class","role","aria-label","colspan","src","alt","href","active","isLoading","cartData","length","allDelete","item","key","id","product","imageUrl","title","type","reduceQty","qty","min","updateCart","addQty","price","delSingle","totalPrice","ref","data","tempProduct","updateDelete","inject","components","DelModal","methods","getCart","api","this","$http","get","then","res","success","carts","getTotalPrice","$refs","del","openModal","delete","$sweetalert2","emitter","emit","hideModal","vm","forEach","total","cart","product_id","put","created","render"],"mappings":"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","file":"js/chunk-2d2102cc.d889f478.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"cart\">\n    <div class=\"banner bg-cover\"></div>\n    <div class=\"container mt-5\">\n      <div class=\"row\">\n        <div class=\"col text-center\">\n          <h2 class=\"fw-bold mb-5\">購物車</h2>\n          <a\n            href=\"#\"\n            class=\"btn-custom hvr-bounce-to-right mb-2\"\n            v-if=\"cartData.length !== 0\"\n            @click.prevent=\"allDelete\"\n            >全部刪除</a\n          >\n          <div class=\"table-responsive-xxl\" v-if=\"cartData.length !== 0\">\n          <table\n            class=\"table fs-4 align-middle table-borderless\"\n          >\n            <thead class=\"border-bottom border-dark\">\n              <tr>\n                <th>產品圖片</th>\n                <th>產品名稱</th>\n                <th>數量</th>\n                <th>價格</th>\n                <th>刪除</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"item in cartData\" :key=\"item.id\" class=\"border-bottom\">\n                <td>\n                  <img :src=\"item.product.imageUrl\" alt=\"\" />\n                </td>\n                <td>{{ item.product.title }}</td>\n                <td>\n                  <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                    <button\n                      type=\"button\"\n                      @click=\"reduceQty(item)\"\n                      class=\"btn btn-primary\"\n                      :class=\"{ disabled: item.qty === 1 }\"\n                    >\n                      <i class=\"bi bi-dash-lg text-white\"></i>\n                    </button>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      class=\"form-control text-center rounded-0\"\n                      @change=\"updateCart(item)\"\n                      v-model.number=\"item.qty\"\n                    />\n                    <button type=\"button\" @click=\"addQty(item)\" class=\"btn btn-primary\">\n                      <i class=\"bi bi-plus-lg text-white\"></i>\n                    </button>\n                  </div>\n                </td>\n                <td>{{ item.product.price }}</td>\n                <td>\n                  <a href=\"#\" class=\"text-danger\" @click.prevent=\"delSingle(item)\">\n                    <i class=\"bi bi-x-square\"></i>\n                  </a>\n                </td>\n              </tr>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"5\" class=\"fw-bold text-end\">總計:</td>\n                <td class=\"text-danger fw-bold\">${{ totalPrice }}</td>\n              </tr>\n            </tfoot>\n          </table>\n          </div>\n          <div class=\"noCart\" v-else>\n            <h4 class=\"fw-bold mb-5\">哎呀！您的購物車是空的，趕快去挑選商品吧！</h4>\n            <img src=\"https://upload.cc/i1/2021/07/13/OGfKXe.jpg\" alt=\"\" />\n            <a href=\"#/products\" class=\"btn-custom2 hvr-shutter-out-horizontal my-2\"\n              ><i class=\"bi bi-reply-fill\"></i>立刻購物</a\n            >\n          </div>\n          <div class=\"btn d-flex justify-content-between\" v-if=\"cartData.length !== 0\">\n            <a href=\"#/products\" class=\"btn-custom2 hvr-shutter-out-horizontal my-2\"\n              ><i class=\"bi bi-reply-fill\"></i>繼續購物</a\n            >\n            <a href=\"#/checkout\" class=\"btn-custom hvr-bounce-to-right my-2\">下一步</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <DelModal ref=\"del\" :data=\"tempProduct\" @update-delete=\"updateDelete\"></DelModal>\n  </div>\n</template>\n\n<script>\nimport DelModal from '@/components/DelModal.vue'\nexport default {\n  data () {\n    return {\n      isLoading: false,\n      cartData: [],\n      tempProduct: {},\n      totalPrice: 0\n    }\n  },\n  inject: ['emitter'],\n  components: {\n    DelModal\n  },\n  methods: {\n    getCart () {\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart`\n      this.isLoading = true\n      this.$http.get(api).then((res) => {\n        if (res.data.success) {\n          this.cartData = res.data.data.carts\n          this.getTotalPrice()\n          this.isLoading = false\n        }\n      })\n    },\n    delSingle (item) {\n      this.tempProduct = { ...item }\n      this.$refs.del.openModal()\n    },\n    updateDelete (id) {\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${id}`\n      this.isLoading = true\n      this.$http.delete(api).then((res) => {\n        if (res.data.success) {\n          this.isLoading = false\n          this.getCart()\n          this.$sweetalert2(res)\n          this.getTotalPrice()\n          this.emitter.emit('update-cart')\n        }\n      })\n      this.$refs.del.hideModal()\n    },\n    allDelete () {\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/carts`\n      this.isLoading = true\n      this.$http.delete(api).then((res) => {\n        if (res.data.success) {\n          this.$sweetalert2(res)\n          this.emitter.emit('update-cart')\n          this.isLoading = false\n          this.getCart()\n        }\n      })\n    },\n    getTotalPrice () {\n      const vm = this\n      vm.totalPrice = 0\n      vm.cartData.forEach((item) => {\n        this.totalPrice += item.total\n      })\n    },\n    addQty (item) {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\n      item.qty += 1\n      const cart = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      this.$http.put(api, { data: cart }).then((res) => {\n        if (res.data.success) {\n          this.$sweetalert2(res)\n          this.getCart()\n          this.isLoading = false\n        }\n      })\n    },\n    reduceQty (item) {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\n      item.qty -= 1\n      const cart = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      this.$http.put(api, { data: cart }).then((res) => {\n        if (res.data.success) {\n          this.$sweetalert2(res)\n          this.getCart()\n          this.isLoading = false\n        }\n      })\n    },\n    updateCart (item) {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${item.id}`\n      const cart = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      this.$http.put(api, { data: cart }).then((res) => {\n        if (res.data.success) {\n          this.$sweetalert2(res)\n          this.getCart()\n          this.isLoading = false\n        }\n        if (res.data.success && item.qty === 0) {\n          this.updateDelete(item.id)\n        }\n      })\n    }\n  },\n  created () {\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./Cart.vue?vue&type=template&id=fd5628c6\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}